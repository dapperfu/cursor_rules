---
description: Upstream synchronization workflow before commits
globs: []
alwaysApply: true
---

# Git Upstream Sync

## Requirement

SHALL sync with upstream before committing.

## Workflow

The upstream sync workflow SHALL follow these steps:

1. `git fetch upstream && git fetch origin`
2. Detect upstream branch: `git symbolic-ref refs/remotes/upstream/HEAD | sed 's@^refs/remotes/upstream/@@' || echo "main"`
3. Merge upstream changes: `git merge upstream/<branch>`
4. Resolve any merge conflicts automatically when possible
5. Then proceed with commit
6. After commit, push if remote exists
